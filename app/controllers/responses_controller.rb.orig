class ResponsesController < ApplicationController

  def new
    @survey = Survey.find(params[:survey_id])
    @response = @survey.responses.build
  end

  def create
    @survey = Survey.find(params[:survey_id])
    @response = @survey.responses.build(response_params)
<<<<<<< HEAD


=======
    p @response.errors.full_messages
    p @response.singles
    p response_params
>>>>>>> e7e24e5... wip
    if @response.save
      flash[:success] = "Success"
      redirect_to [:admin, :surveys]
    else
      puts "*" * 20
      p @response.errors
      p response_params
      flash[:error] = "Error"
      render :new
    end

  end

  private

  def response_params
<<<<<<< HEAD
    params.require(:response).permit(:answers_attributes => [:id, :question_id, :option_ids, {option_ids: []},  {:single_attributes => [:option_id]}, {:multis_attributes => [:option_id => []]}] )
=======
    params.require(:response).permit(:answers_attributes => [:id, :question_id, {option_ids: []},  {:single_attributes => [:id, :option_id]} ] )
>>>>>>> e7e24e5... wip
  end





end
